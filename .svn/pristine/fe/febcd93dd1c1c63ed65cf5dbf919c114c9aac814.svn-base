#Created By: Persistent Automation Team
#Created on:30-Nov-2016
@RegressionTest
Feature: Add Edit View CAGE Survey

  Background: 
    Given user is logged in with valid credentials
    And navigates to Engagement tab
    And clicks on Engagement id
    When user clicks on Surveys tab
    Then validates that Surveys tab is displayed

  Scenario: To 'Save & Lock' Add Survey of type CAGE Survey.
    #When User clicks on Add Survey button
    When user adds Survey type "CAGE Survey"
    Then validates that CAGE Survey form is displayed
    And selects date for CAGE Survey
    # Two positive responses are considered a positive test and indicate further assessment is warranted
    And selects Have you felt you should cut down on your drinking? as Yes
    And Select Have others annoyed you by criticizing your drinking? as Yes
    And selects Have you ever felt guilty about your drinking? as Yes
    And Select Have you ever had a drink first thing in the morning to steady your nerves or get rid of a hangover? as Yes
    And Click on Calculate Score Button
    And clicks on Save&Lock button for CAGE Survey
    Then validates that new "CAGE Survey" Survey is created
    Then validate that Add Survey Status for type "CAGE Survey" is "Locked"

  #Created By: Persistent Automation Team
  #Created on:28-Nov-2016
  @SmokeTest
  Scenario: To 'Save' Add Survey of type CAGE Survey.
    #When User clicks on Add Survey button
    When user adds Survey type "CAGE Survey"
    Then validates that CAGE Survey form is displayed
    And selects date for CAGE Survey
    # Two positive responses are considered a positive test and indicate further assessment is warranted
    And selects Have you felt you should cut down on your drinking? as Yes
    And Select Have others annoyed you by criticizing your drinking? as Yes
    And selects Have you ever felt guilty about your drinking? as Yes
    And Select Have you ever had a drink first thing in the morning to steady your nerves or get rid of a hangover? as Yes
    And Click on Calculate Score Button
    And clicks on Save button for CAGE Survey

  #Then validates that new "CAGE Survey" Survey is created
  #Then validate that Add Survey Status for type "CAGE Survey" is "In Progress"
  Scenario: To Validate that Cancel button on Selected Survey page is working properly.
    When user adds Survey type "CAGE Survey"
    And clicks on Cancel button on CAGE Survey page
    And clicks on Cancel button for CAGE Survey
    Then validates that new survey is not created for Survey type "CAGE Survey"

  Scenario: Validate that Cancel button on Respective Survey  page is working properly.
    When user clicks on Add Survey button to add type "CAGE Survey"
    And clicks on Cancel button for CAGE Survey
    Then validates that new survey is not created for Survey type "CAGE Survey"

  Scenario: Edit CAGE Survey
    When navigates to Engagement tab
    And clicks on Engagement id
    And user clicks on Surveys tab
    Then validates that Surveys tab is displayed
    When clicks on Edit link for Record type "CAGE Survey" and status "In Progress"
    Then validates that CAGE Survey details page displayed
    Then validates Consumer field
    Then validates Gender field
    And user enters Date in Date field
    And user select Refused radio button as Yes
    And Click on Calculate Score Button
    And Verify the Total Score displayed
    And user clicks on Save button
    Then Verify Survey is Updated

  #Created By: Persistent Automation Team
  #Created on:29-Nov-2016
  @SmokeTest
  Scenario: View CAGE Survey
    When navigates to Engagement tab
    And clicks on Engagement id
    And user clicks on Surveys tab
    Then validates that Surveys tab is displayed
    When clicks on View link for Record type "CAGE Survey" and status "In Progress"
    Then validates that CAGE Survey details page displayed
    Then validates Consumer field
    Then validates Gender field
    Then validates Updated Date field
    Then validates that Refused radio button as Yes is selected
    Then validates Updated Total Score
    And user clicks on Cancel button
    Then validates that Surveys tab is displayed
